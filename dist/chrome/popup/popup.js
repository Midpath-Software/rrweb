import{c as P,f as L,u as O,o as _,j as t,a as k,b as $,B as F,r as c,d as S,F as C,T as R,S as z,I as y,e as U,g as A,h as v,i as G,k as V,L as W,l as Z,R as H,C as K}from"../index.esm.js";import{C as q,R as a,L as m,E as h,S as J}from"../types.js";var[Q,X]=P({name:"StatStylesContext",errorMessage:`useStatStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Stat />" `}),M=L(function(s,r){const n=O("Stat",s),i={position:"relative",flex:"1 1 0%",...n.container},{className:g,children:d,...p}=_(s);return t.jsx(Q,{value:n,children:t.jsx(k.div,{ref:r,...p,className:$("chakra-stat",g),__css:i,children:t.jsx("dl",{children:d})})})});M.displayName="Stat";var B=L(function(s,r){const n=X();return t.jsx(k.dd,{ref:r,...s,className:$("chakra-stat__number",s.className),__css:{...n.number,fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums"}})});B.displayName="StatNumber";function N({diameter:e,onClick:s,children:r,title:n,...i}){return t.jsx(F,{w:`${e}rem`,h:`${e}rem`,padding:`${e/2}rem`,borderRadius:9999,textAlign:"center",bgColor:"gray.100",boxSizing:"content-box",onClick:s,title:n,...i,children:r})}const T=1e3,E=60*T,D=60*E;function Y(e){if(e<=0)return"00:00";const s=Math.floor(e/D);e=e%D;const r=Math.floor(e/E);e=e%E;const n=Math.floor(e/T);return s?`${x(s)}:${x(r)}:${x(n)}`:`${x(r)}:${x(n)}`}function x(e,s=2){let r=String(e);const n=Math.pow(10,s-1);if(e<n)for(;String(n).length>r.length;)r=`0${e}`;return r}function ee({startTime:e,ticking:s}){const[r,n]=c.useState(Date.now()-e);return c.useEffect(()=>{if(!s)return;const i=setInterval(()=>{n(Date.now()-e)},100);return()=>clearInterval(i)},[e,s]),t.jsx(M,{textAlign:"center",mt:4,children:t.jsx(B,{fontSize:"3xl",children:Y(r)})})}const l=3,f=new q;function te(){const[e,s]=c.useState(a.IDLE),[r,n]=c.useState(""),[i,g]=c.useState(0),[d,p]=c.useState(null);return c.useEffect(()=>{const b=o=>{const{status:u,startTimestamp:j,pausedTimestamp:w}=o;s(u),j&&w?g(Date.now()-w+j):j&&g(j)};S.storage.local.get(m.recorderStatus).then(o=>{!o||!o[m.recorderStatus]||b(o[m.recorderStatus])}),S.storage.local.onChanged.addListener(o=>{if(!o[m.recorderStatus])return;const u=o[m.recorderStatus].newValue;b(u),u.errorMessage&&n(u.errorMessage)}),f.on(h.SessionUpdated,o=>{p(o.session)})},[]),t.jsxs(C,{direction:"column",w:300,padding:"5%",children:[t.jsxs(C,{children:[t.jsx(R,{fontSize:"md",fontWeight:"bold",children:"RRWeb Recorder"}),t.jsx(J,{}),t.jsxs(z,{direction:"row",children:[t.jsx(y,{onClick:()=>{S.tabs.create({url:"/pages/index.html#/"})},size:"xs",icon:t.jsx(U,{}),"aria-label":"Session List",title:"Session List"}),t.jsx(y,{onClick:()=>{S.runtime.openOptionsPage()},size:"xs",icon:t.jsx(A,{}),"aria-label":"Settings button",title:"Settings"})]})]}),e!==a.IDLE&&i&&t.jsx(ee,{startTime:i,ticking:e===a.RECORDING}),t.jsxs(C,{justify:"center",gap:"10",mt:"5",mb:"5",children:[t.jsx(N,{diameter:l,title:e===a.IDLE?"Start Recording":"Stop Recording",onClick:()=>{e===a.IDLE?f.emit(h.StartButtonClicked,{}):f.emit(h.StopButtonClicked,{})},children:t.jsx(v,{w:`${l}rem`,h:`${l}rem`,borderRadius:e===a.IDLE?9999:6,margin:"0",bgColor:"red.500"})}),e!==a.IDLE&&t.jsx(N,{diameter:l,title:e===a.RECORDING?"Pause Recording":"Resume Recording",onClick:()=>{e===a.RECORDING?f.emit(h.PauseButtonClicked,{}):f.emit(h.ResumeButtonClicked,{})},children:t.jsxs(v,{w:`${l}rem`,h:`${l}rem`,borderRadius:9999,margin:"0",color:"gray.600",children:[[a.PAUSED,a.PausedSwitch].includes(e)&&t.jsx(G,{style:{paddingLeft:"0.5rem",width:"100%",height:"100%"}}),e===a.RECORDING&&t.jsx(V,{style:{width:"100%",height:"100%"}})]})})]}),d&&t.jsxs(R,{children:[t.jsx(R,{as:"b",children:"New Session: "}),t.jsx(W,{href:S.runtime.getURL(`pages/index.html#/session/${d.id}`),isExternal:!0,children:d.name})]}),r!==""&&t.jsxs(R,{color:"red.500",fontSize:"md",children:[r,t.jsx("br",{}),"Maybe refresh your current tab."]})]})}const I=document.getElementById("root");I&&Z(I).render(t.jsx(H.StrictMode,{children:t.jsx(K,{children:t.jsx(te,{})})}));
